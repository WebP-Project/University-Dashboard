<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intra-University Events Decision Dashboard</title>
    <link rel="stylesheet" href="css/admin-style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <nav class="sidebar">
            <div class="brand">
                <h2>UniEvent</h2>
                <p>Decision Support System</p>
                <button onclick="toggleTheme()" class="toggle-btn">
                    <i class="fas fa-adjust"></i> Switch Theme
                </button>
            </div>

            <ul>
                <li onclick="showSection('scheduling', this)" class="active-nav"><i class="fas fa-calendar-check"></i> Event Planning</li>
                <li onclick="showSection('confirmation', this)"><i class="fas fa-check-circle"></i> Event Confirmation</li>
                <li onclick="showSection('budget', this)"><i class="fas fa-wallet"></i> Budget Allocation</li>
                <li onclick="showSection('venues', this)"><i class="fas fa-building"></i> Venue Utilization</li>
                <li onclick="showSection('participation', this)"><i class="fas fa-users"></i> Participation Analysis</li>
                <li onclick="showSection('performance', this)"><i class="fas fa-chart-line"></i> Performance Evaluation</li>
                <li onclick="showSection('planning', this)"><i class="fas fa-lightbulb"></i> Future Event Planning</li>
            </ul>
        </nav>

        <main class="main-content">
            <header class="topbar">
                <h2>Admin Dashboard</h2>
                <div class="topbar-actions">
                    <span id="adminTopName" class="admin-top-name">Admin</span>
                    <button id="adminProfileToggle" class="icon-btn" type="button" aria-label="Profile" title="Profile">
                        <i class="fas fa-user-circle"></i>
                    </button>
                    <button id="adminLogoutBtn" class="toggle-btn logout-btn" type="button">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
                <div id="adminProfilePanel" class="profile-panel hidden">
                    <h4 class="profile-title">Admin Profile</h4>
                    <p><strong>Name:</strong> <span id="adminProfileName">-</span></p>
                    <p><strong>Email:</strong> <span id="adminProfileEmail">-</span></p>
                    <p><strong>Role:</strong> <span id="adminProfileRole">-</span></p>
                </div>
            </header>

            <section id="scheduling" class="section">
                <header class="section-header">
                    <h1>Event Planning</h1>
                    <p>Plan and schedule university events</p>
                </header>

                <div class="kpi-grid">
                    <div class="card kpi">
                        <h3>Total Events</h3>
                        <p id="totalEventsDisplay">0</p>
                    </div>
                    <div class="card kpi">
                        <h3 style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 5px;">Confirmed Events</h3>
                        <h2 id="confirmedEventsCount" style="font-size: 2rem;">0</h2>
                    </div>
                    <div class="card kpi">
                        <h3 style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 5px;">Planning Events</h3>
                        <h2 id="planningEventsCount" style="font-size: 2rem;">0</h2>
                    </div>
                </div>

                <div class="scheduling-layout">
                    <div class="card form-card">
                        <h3>Schedule New Event</h3>
                        <form id="eventForm">
                            <div class="form-group">
                                <label for="eventName">Event Name</label>
                                <input type="text" id="eventName" required placeholder="e.g. Annual Debate">
                            </div>
                            <div class="form-group">
                                <label for="eventDate">Date</label>
                                <input type="date" id="eventDate" required>
                            </div>
                            <div class="form-group">
                                <label for="eventTime">Time Slot</label>
                                <select id="eventTime">
                                    <option value="Morning">Morning (9AM - 1PM)</option>
                                    <option value="Afternoon">Afternoon (2PM - 6PM)</option>
                                    <option value="Evening">Evening (7PM - 10PM)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="eventVenue">Venue</label>
                                <select id="eventVenue">
                                    <option value="Grand Auditorium">Grand Auditorium</option>
                                    <option value="Sports Complex">Sports Complex</option>
                                    <option value="Conference Hall A">Conference Hall A</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="eventDescription">Description</label>
                                <input type="text" id="eventDescription" required="false">
                            </div>
                            <button type="submit" class="btn-primary">Plan an Event</button>
                        </form>

                        <div id="clashAlert" class="alert error hidden">
                            <strong>Clash Detected!</strong> This venue is already booked for the selected slot.
                        </div>
                        <div id="successAlert" class="alert success hidden">
                            <strong>Success!</strong> Event Planned.
                        </div>
                    </div>

                    <div class="card table-card">
                        <h3>Scheduled Events Database</h3>
                        <table id="eventsTable" class="styled-table">
                            <thead>
                                <tr>
                                    <th>Event Name</th>
                                    <th>Date / Time</th>
                                    <th>Venue</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="eventsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </section>
            <section id="confirmation" class="section hidden">
            <header class="section-header">
                <h1>Event Confirmation</h1>
                <p>Confirm planned events to officially book the venue.</p>
            </header>

            <div class="confirmation-layout">
                <div class="card form-card confirm-card">
                    <h3>Confirm a Planned Event</h3>
                   <form id="confirmForm">
                    <div class="form-group">
                        <label>Select Planned Event</label>
                        <select id="confirmEventSelect" required>
                            <option value="">-- Choose an event to confirm --</option>
                            </select>
                    </div>

                    <div id="confirmEventDetails" class="hidden confirm-details">
                        <p><strong>Date:</strong> <span id="detailDate"></span></p>
                        <p><strong>Time Slot:</strong> <span id="detailTime"></span></p>
                        <p><strong>Venue:</strong> <span id="detailVenue"></span></p>
                        <p><strong>Description:</strong> <span id="detailDescription"></span></p>
                    </div>

                    <button type="submit" class="btn-primary confirm-btn">Confirm Event</button>
                </form>

                <div id="confirmMessage" class="alert hidden"></div>
                </div>
            </div>
            </section>
            <section id="budget" class="section hidden">
                <header class="section-header">
                    <h1>Budget Allocation</h1>
                    <p>Track allocated budgets, current spend, and variance by category.</p>
                </header>

                <div id="budgetCards" class="insight-grid"></div>

                <div class="charts-grid">
                    <div class="card chart-container">
                        <h3>Budget Composition (Spent vs Remaining %)</h3>
                        <canvas id="budgetChart"></canvas>
                    </div>
                    <div class="card chart-container">
                        <h3>Allocated vs Spent (INR)</h3>
                        <canvas id="burnChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="venues" class="section hidden">
                <header class="section-header">
                    <h1>Venue Utilization</h1>
                    <p>Daily venue utilization across the selected date range.</p>
                </header>

                <div class="card">
                    <div class="filter-row">
                        <label for="venueRange">Range</label>
                        <select id="venueRange" onchange="renderVenueUtilization()">
                            <option value="week">Next 7 Days</option>
                            <option value="month" selected>Next 30 Days</option>
                            <option value="all">All Dates</option>
                        </select>
                        <button class="chip active-chip" onclick="filterVenue('all', this)">All</button>
                        <button class="chip" onclick="filterVenue('available', this)">Available</button>
                        <button class="chip" onclick="filterVenue('high', this)">High Load</button>
                    </div>
                    <div id="venueOverview" class="insight-grid"></div>
                    <div id="venueMatrix" class="venue-matrix"></div>
                </div>
            </section>

            <section id="participation" class="section hidden">
                <header class="section-header">
                    <h1>Student Participation Analysis</h1>
                    <p>Attendance trends, registrations, and top-performing events.</p>
                </header>

                <div class="card">
                    <div class="filter-row">
                        <label for="participationRange">Range</label>
                        <select id="participationRange" onchange="renderParticipation()">
                            <option value="all">All Events</option>
                            <option value="5">Latest 5</option>
                            <option value="3">Latest 3</option>
                        </select>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="card chart-container">
                        <h3>Registrations vs Attendance</h3>
                        <canvas id="participationChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>Top Events Leaderboard</h3>
                        <ul id="topEventsList" class="leaderboard"></ul>
                    </div>
                </div>
            </section>

            <section id="performance" class="section hidden">
                <header class="section-header">
                    <h1>Performance and Engagement Evaluation</h1>
                    <p>Event-level health scoring using turnout and utilization signals.</p>
                </header>

                <div id="performanceKpis" class="kpi-grid"></div>

                <div class="card">
                    <h3>Underperforming Events</h3>
                    <table class="styled-table">
                        <thead>
                            <tr>
                                <th>Event</th>
                                <th>Engagement Score</th>
                                <th>Risk</th>
                            </tr>
                        </thead>
                        <tbody id="riskTableBody"></tbody>
                    </table>
                </div>
            </section>

            <section id="planning" class="section hidden">
                <header class="section-header">
                    <h1>Future Event Planning</h1>
                    <p>Scenario-based recommendations for upcoming events.</p>
                </header>

                <div id="planningGrid" class="insight-grid"></div>
            </section>
        </main>
    </div>

    <script src="js/admin-logic.js"></script>
</body>
</html>
